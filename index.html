<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Be My Valentine ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg,#ff9a9e,#fad0c4);
  text-align:center;
}
.page{
  display:none;
  min-height:100vh;
  padding:30px 16px;
  box-sizing:border-box;
}
.page.active{display:block;}

h1,h2,p{color:#b3003c;}
button{
  padding:14px 28px;
  margin:12px;
  border:none;
  border-radius:30px;
  font-size:18px;
  background:#ff4d6d;
  color:white;
  cursor:pointer;
}
button:active{transform:scale(0.96)}

/* floating hearts */
.heart{
  position:fixed;
  bottom:-20px;
  font-size:18px;
  opacity:0.4;
  animation:floatUp 10s linear infinite;
  pointer-events:none;
}
@keyframes floatUp{
  from{transform:translateY(0)}
  to{transform:translateY(-120vh)}
}

/* puzzle */
#puzzleBoard{
  width:300px;
  height:300px;
  margin:20px auto;
  display:grid;
  grid-template-columns:repeat(3,1fr);
  grid-template-rows:repeat(3,1fr);
  gap:2px;
}
.tile{
  background-size:300px 300px;
  border-radius:6px;
}

/* quiz */
.option{display:block;max-width:320px;margin:10px auto;}
.shake{animation:shake .4s}
@keyframes shake{25%{transform:translateX(-5px)}50%{transform:translateX(5px)}75%{transform:translateX(-5px)}}

/* progress */
#barWrap{width:80%;margin:10px auto;background:#ffd1dc;border-radius:10px}
#bar{height:10px;width:0;background:#ff4d6d;border-radius:10px;transition:.3s}

canvas{position:fixed;inset:0;pointer-events:none;}
</style>
</head>
<body>

<audio id="bgMusic" loop>
  <source src="thousand-years.mp3" type="audio/mpeg">
</audio>
<canvas id="fx"></canvas>

<!-- PAGE 1 -->
<div class="page active" id="p1">
  <h1>Will you be my Valentine? üíñ</h1>
  <p>Choose one üòå</p>
  <button onclick="startAndGo(2)">Yes</button>
  <button onclick="startAndGo(2)">Yessss</button>
  <button onclick="startAndGo(2)">Fucking Yess</button>
</div>

<!-- PAGE 2 -->
<div class="page" id="p2">
  <h2>Choose our memory üíû</h2>
  <p>Tap one image</p>
  <img src="img1.jpg" width="180" onclick="startPuzzle('img1.jpg')">
  <img src="img2.jpg" width="180" onclick="startPuzzle('img2.jpg')">
  <img src="img3.jpg" width="180" onclick="startPuzzle('img3.jpg')">
</div>

<!-- PAGE 3 -->
<div class="page" id="p3">
  <h2>Complete the puzzle üß©</h2>
  <div id="puzzleBoard"></div>
  <button onclick="verifyPuzzle()">Next</button>
</div>

<!-- PAGE 4 -->
<div class="page" id="p4">
  <h2>How well do you know me? üí≠</h2>
  <div id="barWrap"><div id="bar"></div></div>
  <p id="score">0 / 5</p>
  <div id="quiz"></div>
</div>

<!-- PAGE 5 -->
<div class="page" id="p5">
  <h1>üíå A Letter For You</h1>
  <p>Hey you,</p>
  <p>Loving you has been one of the most beautiful surprises of my life.</p>
  <p>Somewhere between laughter, chaos, fights, and comfort ‚Äî you became my home.</p>
  <p>I don‚Äôt always say it perfectly, but I choose you. Every single day.</p>
  <p><strong>Happy Valentine‚Äôs Day ‚ù§Ô∏è</strong></p>
</div>

<script>
/* navigation + music */
let musicStarted=false;
function startAndGo(n){
  if(!musicStarted){
    document.getElementById('bgMusic').play().catch(()=>{});
    musicStarted=true;
  }
  go(n);
}
function go(n){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('p'+n).classList.add('active');
}

/* hearts background */
for(let i=0;i<25;i++){
  let h=document.createElement('div');
  h.className='heart';
  h.innerHTML='‚ù§Ô∏è';
  h.style.left=Math.random()*100+'vw';
  h.style.animationDuration=6+Math.random()*6+'s';
  document.body.appendChild(h);
}

/* puzzle */
let dragged=null;
function startPuzzle(img){
  go(3);
  const b=document.getElementById('puzzleBoard');
  b.innerHTML='';
  let order=[0,1,2,3,4,5,6,7,8].sort(()=>Math.random()-0.5);
  order.forEach((p)=>{
    let t=document.createElement('div');
    t.className='tile';
    t.dataset.correct=p;
    t.style.backgroundImage=`url(${img})`;
    t.style.backgroundPosition=`${-(p%3)*100}px ${-Math.floor(p/3)*100}px`;
    t.draggable=true;
    t.ondragstart=()=>dragged=t;
    t.ondragover=e=>e.preventDefault();
    t.ondrop=e=>{
      e.preventDefault();
      let bp=dragged.style.backgroundPosition;
      let dc=dragged.dataset.correct;
      dragged.style.backgroundPosition=t.style.backgroundPosition;
      dragged.dataset.correct=t.dataset.correct;
      t.style.backgroundPosition=bp;
      t.dataset.correct=dc;
    };
    b.appendChild(t);
  });
}
function verifyPuzzle(){
  let ok=true;
  document.querySelectorAll('.tile').forEach((t,i)=>{
    if(+t.dataset.correct!==i) ok=false;
  });
  ok ? (fireworks(), go(4), loadQuiz()) : alert('Almost there üòè');
}

/* quiz */
const quizData=[
 {q:'What is my favourite colour?',o:['Black','Pink','Blue','Purple'],a:2},
 {q:'What do I prefer more?',o:['Coffee','Tea','Red Bull','I don‚Äôt need caffeine, I need you üòå'],a:3},
 {q:'What annoys me the most?',o:['Being late','Not replying','Messy rooms','All of the above'],a:2},
 {q:'My ideal date looks like?',o:['Candle light dinner','Long drive + music','Netflix + food + cuddles','All with you ‚ù§Ô∏è'],a:3},
 {q:'One thing I secretly love?',o:['Compliments','Being pampered','Random surprises','All of this üò§'],a:3}
];
let qi=0,score=0;
function loadQuiz(){
  const q=quizData[qi];
  const box=document.getElementById('quiz');
  box.innerHTML=`<h3>${q.q}</h3>`;
  q.o.forEach((o,i)=>{
    let b=document.createElement('button');
    b.className='option';
    b.innerText=o;
    b.onclick=()=>checkAnswer(b,i);
    box.appendChild(b);
  });
}
function checkAnswer(btn,i){
  if(i===quizData[qi].a){
    score++; fireworks(); qi++;
    document.getElementById('score').innerText=`${score} / 5`;
    document.getElementById('bar').style.width=(score/5*100)+'%';
    qi<quizData.length ? loadQuiz() : go(5);
  }else{
    btn.classList.add('shake');
    setTimeout(()=>btn.classList.remove('shake'),400);
    brokenHearts();
  }
}

/* effects */
const c=document.getElementById('fx'),ctx=c.getContext('2d');
c.width=innerWidth;c.height=innerHeight;let parts=[];
function fireworks(){for(let i=0;i<80;i++)parts.push({x:Math.random()*c.width,y:Math.random()*c.height/2,vx:(Math.random()-.5)*5,vy:(Math.random()-.5)*5,l:60})}
function brokenHearts(){for(let i=0;i<40;i++)parts.push({x:Math.random()*c.width,y:Math.random()*c.height/2,vx:(Math.random()-.5)*4,vy:(Math.random()-.5)*4,l:40})}
(function anim(){ctx.clearRect(0,0,c.width,c.height);parts.forEach((p,i)=>{p.x+=p.vx;p.y+=p.vy;p.l--;ctx.fillStyle='hsl('+Math.random()*360+',100%,60%)';ctx.fillRect(p.x,p.y,3,3);if(p.l<=0)parts.splice(i,1)});requestAnimationFrame(anim)})();
</script>
</body>
</html>
